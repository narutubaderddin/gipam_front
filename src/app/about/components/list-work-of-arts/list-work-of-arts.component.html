<div class="breadcrumb">
  <a href="home-page" class="selected-item"> Liste oeuvres d'art </a>
</div>
<div class="container-fluid">
  <div class="body">
    <div class="add-export-bloc d-flex flex-content-between">
      <div class="d-flex add-bloc">
        <div class="dropdown-container mb-2 mr-2 mb-sm-0">
          <div
            ngbDropdown
            placement="bottom-left"
            class="d-inline-block add-button"
            autoClose="outside"
            container="body"
          >
            <button class="btn add-action" id="dropdownBasic" ngbDropdownToggle translate>Ajouter notice</button>
            <div class="py-0 ng-dropdown" ngbDropdownMenu aria-labelledby="dropdownBasic">
              <ul class="list-group">
                <li class="list-group-item" (click)="addPropertyMovableObject()">Ajouter une notice en propriété</li>
                <li class="list-group-item">Ajouter une notice en dépôt</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="d-flex">
        <div [ngClass]="{ 'picture-mode': mode === 'pictures', 'list-mode': mode === 'liste' }">
          <button type="button" class="btn picture">
            <i class="zmdi zmdi-view-stream"></i>
          </button>
          <button type="button" class="btn list">
            <i class="zmdi zmdi-grid"></i>
          </button>
        </div>
      </div>
    </div>
    <div class="mt-2">
      <div class="request" [ngClass]="isCollapsed ? 'collapsed' : 'non-collapsed'" (click)="openCollapse()">
        <h5>Recherche</h5>
      </div>
      <div *ngIf="isCollapsed" class="collapse-bloc">
        <app-request [fields]="ColDef" (validateRequest)="onValidateRequest($event)"></app-request>
      </div>
    </div>
    <div *ngIf="showDatatable">
      <div class="filter-bloc d-flex">
        <div class="d-flex">
          <div class="dropdown-container mb-2 mr-2 mb-sm-0">
            <div
              ngbDropdown
              placement="bottom-right"
              class="d-inline-block drop-bloc"
              autoClose="outside"
              container="body"
            >
              <button class="btn export-button" id="dropdownBasic" ngbDropdownToggle translate>
                <i class="fas fa-file-export"></i>
              </button>
              <div class="py-0 ng-dropdown" ngbDropdownMenu aria-labelledby="dropdownBasic">
                <ul class="list-group">
                  <li class="list-group-item"><i class="fas fa-file-export"></i> Exporter Notices style catalogue</li>
                  <li class="list-group-item"><i class="fas fa-file-export"></i> Exporter Notices techniques</li>
                  <li class="list-group-item">
                    <i class="fas fa-file-export"></i> Exporter Notices complètes techniques
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="dropdown-container mb-2 mr-2 mb-sm-0">
            <div
              ngbDropdown
              placement="bottom-right"
              class="d-inline-block drop-bloc"
              autoClose="outside"
              container="body"
            ></div>
          </div>
          <div class="dropdown-container mb-2 mb-sm-0">
            <div
              ngbDropdown
              placement="bottom-right"
              class="d-inline-block drop-bloc"
              autoClose="outside"
              container="body"
            >
              <button class="btn dropdown-btn" id="dropdownBasic1" ngbDropdownToggle translate>Colonnes</button>
              <div class="py-0 ng-dropdown" ngbDropdownMenu aria-labelledby="dropdownBasic1">
                <div class="columns-dropdown">
                  <div class="col-12 col-sm-6 pt-1 column-check" *ngFor="let headerCol of columns">
                    <label class="checkbox-container" translate
                      >{{ headerCol.getColDef().headerName }}
                      <input
                        type="checkbox"
                        #headerCheck
                        (click)="onHeaderToggle(headerCol)"
                        [checked]="headerCol.isVisible()"
                      />
                      <span class="checkmark"></span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="search-quick-fliter-bloc d-flex flex-content-between">
        <div class="quick-filters d-flex">
          <h6 class="text-quick-filter">Filtres rapides :</h6>
          <div class="dropdown-container mb-2 mr-2 mb-sm-0">
            <div class="d-inline-block drop-bloc">
              <button class="btn dropdown-btn list quick-filter-btn" (click)="resetFilter()">Oeuvres archivées</button>
            </div>
          </div>
          <div class="dropdown-container mb-2 mr-2 mb-sm-0">
            <div class="d-inline-block drop-bloc">
              <button class="btn dropdown-btn list quick-filter-btn" (click)="resetFilter()">Oeuvres perdues</button>
            </div>
          </div>
          <div class="dropdown-container mb-2 mr-2 mb-sm-0">
            <div class="d-inline-block drop-bloc">
              <button class="btn dropdown-btn list quick-filter-btn" (click)="resetFilter()">
                Oeuvres récemment modifiées
              </button>
            </div>
          </div>
          <div class="dropdown-container mb-2 mr-2 mb-sm-0">
            <div class="d-inline-block drop-bloc">
              <button class="btn dropdown-btn list quick-filter-btn" (click)="resetFilter()">
                Oeuvres en cours de création
              </button>
            </div>
          </div>
          <div>
            <div class="dropdown-container mb-2 mr-2 mb-sm-0" style="margin: 3px 0 15px 0">
              <div class="d-inline-block drop-bloc">
                <span class="icon-stack d-flex" (click)="resetFilter()">
                  <i class="fas fa-filter"></i>
                  <i class="fas fa-times"></i>
                </span>
              </div>
            </div>
          </div>
        </div>
        <div class="d-flex">
          <div class="search-panel">
            <input
              (keyup)="search($event)"
              (clear)="search()"
              class="form-control"
              type="text"
              name="search"
              autocomplete="off"
              placeholder="Recherche"
            />
          </div>
        </div>
      </div>
      <div class="datatable mt-4">
        <div *ngIf="selectedRowCount > 0">
          <div class="mass-action-container">
            <i class="fas fa-share"></i>
            <button class="btn add-action" translate>
              <i class="fas fa-plus"></i>
              Créer mouvement
            </button>
            <button class="btn add-action" translate>
              <i class="fas fa-plus"></i>
              Créer constat
            </button>
            <button class="btn add-action" translate>
              <i class="fas fa-plus"></i>
              Créer recolement
            </button>
          </div>
        </div>
        <app-grid-wrapper
          [columnDefs]="ColDef"
          [rowData]="oeuvreToShow"
          [frameworkComponents]="frameworkComponents"
          [defaultColDef]="defaultColDef"
          (gridReady)="onGridReady($event)"
          (rowSelected)="onRowSelected($event)"
          [context]="this"
          [gridOptions]="gridOptions"
          [sizeToFit]="false"
          [paginationPageSize]="rowCount"
          [pinnedCols]="pinnedCols"
          [leftPinnedCols]="leftPinnedCols"
          (cellClicked)="onCellClicked($event)"
        ></app-grid-wrapper>
      </div>
    </div>
  </div>
</div>
